{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport { inputUser, currentPage } from '../main';\n\nexport let amountOfHits = 0;\n\nexport async function getImage() {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=43028681-4db453fe74ec5ab2aaa5007ef&q=${inputUser}&image_type=photo&page=${currentPage}&per_page=15&orientation=horizontal&safesearch=true`);\n    const images = response.data.hits;\n    amountOfHits = images.length;\n    return images;\n  } catch (error) {\n    console.error(error);\n  }\n}","import { gallery, lightbox, currentPage, showLoadMore, addButtonLoad } from '../main';\n\nimport { amountOfHits } from './pixabay-api';\n\nexport function renderPhotos(images) {\n  const markup = images\n    .map(image => {\n          return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n               class=\"gallery-image\"\n               src=\"${image.webformatURL}\"\n               data-source=\"${image.largeImageURL}\"\n               alt=\"${image.tags}\"\n            />\n          </a>\n          <ul class=\"gallery-description\">\n            <li><h3 class=\"image-title\">Likes</h3><p class=\"image-description\">${image.likes}</p></li>\n            <li><h3 class=\"image-title\">Views</h3><p class=\"image-description\">${image.views}</p></li>\n            <li><h3 class=\"image-title\">Comments</h3><p class=\"image-description\">${image.comments}</p></li>\n            <li><h3 class=\"image-title\">Downloads</h3><p class=\"image-description\">${image.downloads}</p></li>\n          </ul>\n        </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n\n  if (amountOfHits < (currentPage * 15)) {\n    hideLoadMore();\n    iziToast.show({\n      color: '#EF4040',\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    })\n      \n  } else if (amountOfHits < 15) {\n    hideLoadMore();\n    iziToast.show({\n      color: '#EF4040',\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    })\n      \n  } else {\n    showLoadMore();\n    addButtonLoad();\n    \n  }\n}","import iziToast from 'izitoast';                      \nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';                  \nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\nconst inputForm = document.querySelector('.input-form');  \nconst button = document.querySelector('.btn');\nexport const gallery = document.querySelector('.gallery');   \nconst loaderItem = document.querySelector('.loader-item');\nconst btnLoad = document.querySelector('.btn-load')  \n\n\nexport let inputUser = \"\";\nexport let currentPage;\n\nexport const lightbox = new SimpleLightbox('.gallery a', {  \n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nbutton.addEventListener('click', event => {   \n  event.preventDefault();\n  currentPage = 1;\n  hideLoadMore();\n  gallery.innerHTML = '';\n  inputUser = inputForm.value.trim();\n  loaderOpen();\n  checkInput();\n  inputForm.value = '';\n});\n\nexport function addButtonLoad() {\n  btnLoad.addEventListener('click', event => {\n  event.preventDefault();\n  currentPage += 1;\n  checkInput().then(() => myScroll());\n  showLoadMore();\n  });\n}\n\n\nfunction checkInput() {     \n  return getImage()\n    .then(images => {\n      if (inputUser === \"\") {\n        iziToast.show({\n          color: '#EF4040',\n          message: `Please complete the field!`,\n          position: 'topRight',\n        });\n      } else if (images.length === 0) {\n        iziToast.error({\n          color: '#EF4040',\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          position: 'topRight',\n        });\n      } else {\n        renderPhotos(images);\n        \n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => loaderDel());\n}\n\n\nfunction loaderOpen() {\n  loaderItem.classList.remove('hidden');\n}\n\nfunction loaderDel() {\n  loaderItem.classList.add('hidden');\n}\n\nexport function showLoadMore() {\n  btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMore() {\n  btnLoad.classList.add('hidden');\n}\n\nfunction myScroll() {\n    const height = gallery.firstChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n\n\n\n"],"names":["amountOfHits","getImage","images","axios","inputUser","currentPage","error","renderPhotos","markup","image","gallery","lightbox","showLoadMore","addButtonLoad","inputForm","button","loaderItem","btnLoad","SimpleLightbox","event","hideLoadMore","loaderOpen","checkInput","myScroll","iziToast","loaderDel","height"],"mappings":"owBAIO,IAAIA,EAAe,EAEnB,eAAeC,GAAW,CAC/B,GAAI,CAEF,MAAMC,GADW,MAAMC,EAAM,IAAI,qEAAqEC,CAAS,0BAA0BC,CAAW,qDAAqD,GACjL,KAAK,KAC7B,OAAAL,EAAeE,EAAO,OACfA,CACR,OAAQI,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CCXO,SAASC,EAAaL,EAAQ,CACnC,MAAMM,EAASN,EACZ,IAAIO,GACQ;AAAA,0CACyBA,EAAM,aAAa;AAAA;AAAA;AAAA,sBAGvCA,EAAM,YAAY;AAAA,8BACVA,EAAM,aAAa;AAAA,sBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,iFAIiDA,EAAM,KAAK;AAAA,iFACXA,EAAM,KAAK;AAAA,oFACRA,EAAM,QAAQ;AAAA,qFACbA,EAAM,SAAS;AAAA;AAAA,cAG/F,EACA,KAAK,EAAE,EACVC,EAAQ,mBAAmB,YAAaF,CAAM,EAC9CG,EAAS,QAAO,EAEZX,EAAgBK,EAAc,IAChC,eACA,SAAS,KAAK,CACZ,MAAO,UACP,QAAS,6DACT,SAAU,UAChB,CAAK,GAEQL,EAAe,IACxB,eACA,SAAS,KAAK,CACZ,MAAO,UACP,QAAS,6DACT,SAAU,UAChB,CAAK,IAGDY,IACAC,IAGJ,CCxCA,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,MAAM,EAC/BL,EAAU,SAAS,cAAc,UAAU,EAClDM,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,WAAW,EAG3C,IAAIb,EAAY,GACZC,EAEJ,MAAMM,EAAW,IAAIO,EAAe,aAAc,CACvD,aAAc,IACd,aAAc,KAChB,CAAC,EAEDH,EAAO,iBAAiB,QAASI,GAAS,CACxCA,EAAM,eAAc,EACpBd,EAAc,EACde,IACAV,EAAQ,UAAY,GACpBN,EAAYU,EAAU,MAAM,OAC5BO,IACAC,IACAR,EAAU,MAAQ,EACpB,CAAC,EAEM,SAASD,GAAgB,CAC9BI,EAAQ,iBAAiB,QAASE,GAAS,CAC3CA,EAAM,eAAc,EACpBd,GAAe,EACfiB,IAAa,KAAK,IAAMC,EAAU,CAAA,EAClCX,GACF,CAAG,CACH,CAGA,SAASU,GAAa,CACpB,OAAOrB,EAAU,EACd,KAAKC,GAAU,CACVE,IAAc,GAChBoB,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,6BACT,SAAU,UACpB,CAAS,EACQtB,EAAO,SAAW,EAC3BsB,EAAS,MAAM,CACb,MAAO,UACP,QAAS,2EACT,SAAU,UACpB,CAAS,EAEDjB,EAAaL,CAAM,CAG3B,CAAK,EACA,MAAMI,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMmB,EAAS,CAAE,CAC9B,CAGA,SAASJ,GAAa,CACpBL,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASS,GAAY,CACnBT,EAAW,UAAU,IAAI,QAAQ,CACnC,CAEO,SAASJ,GAAe,CAC7BK,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEO,SAASG,GAAe,CAC7BH,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEA,SAASM,GAAW,CAChB,MAAMG,EAAShB,EAAQ,WAAW,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACd,IAAKgB,EAAS,EACd,SAAU,QAChB,CAAK,CACL"}