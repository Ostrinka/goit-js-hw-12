{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport { inputUser } from '../main';\n\nexport async function getImage() {\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?key=43028681-4db453fe74ec5ab2aaa5007ef&q=${inputUser}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`);\n\n    const totalHits = response.data.hits;\n    return totalHits;\n  } catch (error) {\n      console.error(error);\n  }\n}\n\n\n","import { gallery, lightbox } from '../main';\n\nexport function renderPhotos(images) {                        \n  const markup = images                          \n    .map(image => {\n      console.log(image);\n      return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n               class=\"gallery-image\"\n               src=\"${image.webformatURL}\"\n               data-source=\"${image.largeImageURL}\"\n               alt=\"${image.tags}\"\n            />\n          </a>\n          <ul class=\"gallery-description\">\n            <li><h3 class=\"image-title\">Likes</h3><p class=\"image-description\">${image.likes}</p></li>\n            <li><h3 class=\"image-title\">Views</h3><p class=\"image-description\">${image.views}</p></li>\n            <li><h3 class=\"image-title\">Comments</h3><p class=\"image-description\">${image.comments}</p></li>\n            <li><h3 class=\"image-title\">Downloads</h3><p class=\"image-description\">${image.downloads}</p></li>\n          </ul>\n        </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}","import iziToast from 'izitoast';                      \nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';                  \nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\nconst inputForm = document.querySelector('.input-form');  \nconst button = document.querySelector('.btn');\nexport const gallery = document.querySelector('.gallery');   \nconst loaderItem = document.querySelector('.loader-item');\nconst btnLoad = document.querySelector('btn-load')  \nconst targetElem = document.querySelector('.target')\n\nexport let inputUser = \"\";\nlet currentPage;\nlet maxPage;\nconst pageSize = 15;\n\nexport const lightbox = new SimpleLightbox('.gallery a', {  \n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nbutton.addEventListener('click', event => {   \n  event.preventDefault();\n  loaderOpen();\n  gallery.innerHTML = '';\n  setTimeout(() => {\n  inputUser = inputForm.value.trim();\n  checkInput();\n  }, 1000);\n});\n\nfunction checkInput() {     \n  getImage()\n    .then(images => {\n      if (inputUser === \"\") {\n        iziToast.show({\n          color: '#EF4040',\n          message: `Please complete the field!`,\n          position: 'topRight',\n        });\n      } else if (images.length === 0) {\n        iziToast.error({\n          color: '#EF4040',\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          position: 'topRight',\n        });\n      } else {\n        renderPhotos(images);\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => loaderDel());\n}\n\nfunction loaderOpen() {                                \n  const spanElement = document.createElement('span');\n  loaderItem.appendChild(spanElement);\n  spanElement.classList.add('loader');\n}\n\nfunction loaderDel() {                          \n  const loader = document.querySelector('.loader');\n  loader.remove();\n}\n\n\n\n\n\n\n// btnLoad.addEventListener('click', event => {\n//     event.preventDefault();\n//     inputUser;\n//     checkInputValidity();\n//     buttonLoad.remove();\n//     loaderG();\n//   });\n\n\n\n// inputForm.addEventListener('submit', onFormSubmit);\n\n\n\n// async function onFormSubmit(event) {\n//   event.preventDefault();\n//   showLoader();\n//   inputUser = event.target.elements.image.value.trim();\n//   currentPage = 1;\n//   gallery.innerHTML = '';\n\n//   if (!inputUser) {\n//     alert('Empty fields');\n//     return;\n//   }\n//   try {\n//     showLoader();\n//     const data = await renderPhotos(inputUser, currentPage);\n//     maxPage = Math.ceil(data.totalHits / pageSize);;\n//     renderArticles(data.articles);\n//     checkObserverStatus();\n//     hideLoader();\n//   } catch (err) {\n//     console.log(err);\n//   }\n//     hideLoader();\n//     checkBtnStatus();\n//     event.target.reset();\n// }\n\n// async function onLoadMoreClick() {\n//   currentPage += 1;\n//   showLoader();\n//   try {\n//     const data = await getArticles(inputUsery, currentPage);\n//     renderArticles(data.articles);\n//   } catch (err) {\n//     console.log(err);\n//   }\n\n//   myScroll();\n//   checkBtnStatus();\n//   hideLoader();\n// }\n\n\n// function showLoadMore() {\n//   btnLoad.classList.remove('hidden');\n// }\n// function hideLoadMore() {\n//   btnLoad.classList.add('hidden');\n// }\n\n// function checkBtnStatus() {\n//   if (currentPage >= maxPage) {\n//     hideLoadMore();\n//   } else {\n//     showLoadMore();\n//   }\n// }\n\n// function articleTemplate(obj) {\n//   const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = obj;\n//   return `<li class=\"gallery-item\">u\n//           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//             <img\n//                class=\"gallery-image\"\n//                src=\"${webformatURL}\"\n//                data-source=\"${largeImageURL}\"\n//                alt=\"${tags}\"\n//             />\n//           </a>\n//           <ul class=\"gallery-description\">\n//             <li><h3 class=\"image-title\">Likes</h3><p class=\"image-description\">${likes}</p></li>\n//             <li><h3 class=\"image-title\">Views</h3><p class=\"image-description\">${views}</p></li>\n//             <li><h3 class=\"image-title\">Comments</h3><p class=\"image-description\">${comments}</p></li>\n//             <li><h3 class=\"image-title\">Downloads</h3><p class=\"image-description\">${downloads}</p></li>\n//           </ul>\n//         </li>`;\n// }\n\n// function articlesTemplate(arr) {\n//   return arr.map(articleTemplate).join('');\n// }\n\n// function renderArticles(arr) {\n//   const markup = articlesTemplate(arr);\n//   gallery.insertAdjacentHTML('beforeend', markup);\n// }\n\n// function checkObserverStatus() {\n//   if (currentPage >= maxPage) {\n//     observer.unobserve(targetElem);\n//   } else {\n//     observer.observe(targetElem);\n//   }\n// }\n\n\n// // ====================================================\n// const observer = new IntersectionObserver(observerCallback);\n\n// function observerCallback(entries) {\n//   const entry = entries[0];\n//   if (!entry.isIntersecting) return;\n//   loadMore();\n// }\n\n// function myScroll() {\n//   const height = gallery.firstChild.getBoundingClientRect().height;\n//       window.scrollBy({\n//       top: height * 2,\n//       behavior: 'smooth',\n//     });\n// }"],"names":["getImage","axios","inputUser","error","renderPhotos","images","markup","image","gallery","lightbox","inputForm","button","loaderItem","SimpleLightbox","event","loaderOpen","checkInput","iziToast","loaderDel","spanElement"],"mappings":"owBAIO,eAAeA,GAAW,CAC/B,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAAI,qEAAqEC,CAAS,sEAAsE,GAE1J,KAAK,IAEjC,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,CACtB,CACH,CCXO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IAAIE,IACH,QAAQ,IAAIA,CAAK,EACV;AAAA,0CAC6BA,EAAM,aAAa;AAAA;AAAA;AAAA,sBAGvCA,EAAM,YAAY;AAAA,8BACVA,EAAM,aAAa;AAAA,sBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,iFAIiDA,EAAM,KAAK;AAAA,iFACXA,EAAM,KAAK;AAAA,oFACRA,EAAM,QAAQ;AAAA,qFACbA,EAAM,SAAS;AAAA;AAAA,eAG/F,EACA,KAAK,EAAE,EACVC,EAAQ,mBAAmB,YAAaF,CAAM,EAE9CG,EAAS,QAAO,CAClB,CClBA,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,MAAM,EAC/BH,EAAU,SAAS,cAAc,UAAU,EAClDI,EAAa,SAAS,cAAc,cAAc,EACxC,SAAS,cAAc,UAAU,EAC9B,SAAS,cAAc,SAAS,EAE5C,IAAIV,EAAY,GAKhB,MAAMO,EAAW,IAAII,EAAe,aAAc,CACvD,aAAc,IACd,aAAc,KAChB,CAAC,EAEDF,EAAO,iBAAiB,QAASG,GAAS,CACxCA,EAAM,eAAc,EACpBC,IACAP,EAAQ,UAAY,GACpB,WAAW,IAAM,CACjBN,EAAYQ,EAAU,MAAM,OAC5BM,GACC,EAAE,GAAI,CACT,CAAC,EAED,SAASA,GAAa,CACpBhB,EAAU,EACP,KAAKK,GAAU,CACVH,IAAc,GAChBe,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,6BACT,SAAU,UACpB,CAAS,EACQZ,EAAO,SAAW,EAC3BY,EAAS,MAAM,CACb,MAAO,UACP,QAAS,2EACT,SAAU,UACpB,CAAS,EAEDb,EAAaC,CAAM,CAE3B,CAAK,EACA,MAAMF,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMe,EAAS,CAAE,CAC9B,CAEA,SAASH,GAAa,CACpB,MAAMI,EAAc,SAAS,cAAc,MAAM,EACjDP,EAAW,YAAYO,CAAW,EAClCA,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASD,GAAY,CACJ,SAAS,cAAc,SAAS,EACxC,OAAM,CACf"}